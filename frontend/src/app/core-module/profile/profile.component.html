<section class="profile-section">

  <app-header></app-header>

  <div class="container">
    <div class="row justify-content-center my-box">
      <div class="col-12 col-md-10 profile-content">

        <ngb-alert class="text-center" type="danger" *ngIf="response" [dismissible]="false">
          {{response}}
        </ngb-alert>
        <ngb-alert class="text-center" type="danger" *ngIf="error" [dismissible]="false">
          {{error}}
        </ngb-alert>

        <ngb-accordion [closeOthers]="true" activeIds="change-personal">

          <ngb-panel id="change-personal" title="Change Personal">
            <ng-template ngbPanelContent>

              <div class="row justify-content-center">
                <div class="col-12 col-md-8">

                  <form [(formGroup)]="personalForm" novalidate #f="ngForm" (ngSubmit)="f.form.valid && changePersonal()">

                    <div class="form-group">
                      <input type="text" class="form-control" formControlName="name" [(ngModel)]="user.displayName"
                             required placeholder="Name"/>
                      <ngb-alert type="danger" *ngIf="f.submitted && !name.valid" [dismissible]="false">
                        Name is require
                      </ngb-alert>
                    </div>

                    <div class="form-group">
                      <input type="text" class="form-control" formControlName="email" [(ngModel)]="user.email" required
                             placeholder="Email*"/>
                      <ngb-alert type="danger" *ngIf="f.submitted && !email.valid" [dismissible]="false">
                        Email is require
                      </ngb-alert>
                    </div>

                    <div class="form-group text-center">
                      <button [disabled]="loading" class="btn btn-outline-success">Save</button>
                      <img *ngIf="loading"
                           src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="/>
                    </div>
                  </form>

                </div>
              </div>

            </ng-template>
          </ngb-panel>

          <ngb-panel id="change-password" title="Change Password">
            <ng-template ngbPanelContent>

              <div class="row justify-content-center">
                <div class="col-12 col-md-8">

                  <form [(formGroup)]="passwordForm" novalidate #f="ngForm" (ngSubmit)="f.form.valid && changePassword()">

                    <div class="form-group">
                      <input type="password" class="form-control" formControlName="oldPassword" [(ngModel)]="oldPassword.value"
                             required placeholder="Old password*"/>
                      <ngb-alert type="danger" *ngIf="f.submitted && !oldPassword.valid" [dismissible]="false">
                        You have to type old password
                      </ngb-alert>
                    </div>

                    <div class="form-group">
                      <input type="password" class="form-control" formControlName="newPassword" [(ngModel)]="newPassword.value" required
                             placeholder="New Password*"/>
                      <ngb-alert type="danger" *ngIf="f.submitted && !newPassword.valid" [dismissible]="false">
                        Wrong password. Password requirements: 8-30 marks, small letter, big letter, digit and special
                        character
                      </ngb-alert>
                    </div>

                    <div class="form-group">
                      <input type="password" class="form-control" formControlName="confirmPassword" required
                             placeholder="Confirm password*"/>
                      <ngb-alert type="danger" *ngIf="f.submitted && confirmPassword.value !== newPassword.value"
                                 [dismissible]="false">
                        Password mismatch
                      </ngb-alert>
                    </div>

                    <div class="form-group text-center">
                      <button [disabled]="loading" class="btn btn-outline-success">Save</button>
                      <img *ngIf="loading"
                           src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="/>
                    </div>
                  </form>

                </div>
              </div>

            </ng-template>
          </ngb-panel>

        </ngb-accordion>

      </div>
    </div>
  </div>

</section>
